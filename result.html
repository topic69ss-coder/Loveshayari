<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Love Result ‚Äî Animated</title>
<meta name="description" content="Your love result and shayari ‚Äî animated." />
<style>
:root{--accent:#ff4d88;--accent2:#6c5ce7;--muted:#6b7280}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui,Arial;background:linear-gradient(180deg,#fff8fb,#fff);color:#111;display:flex;align-items:center;justify-content:center;min-height:100vh}
.card{width:92%;max-width:760px;background:white;border-radius:14px;padding:18px;box-shadow:0 20px 50px rgba(15,15,40,0.08);text-align:center}
.huge{font-size:68px;color:var(--accent);font-weight:800;animation:bounceIn 850ms cubic-bezier(.2,.9,.2,1)}
@keyframes bounceIn{0%{transform:scale(.5);opacity:0}60%{transform:scale(1.08);opacity:1}100%{transform:scale(1)}}
.fadeUp{animation:fadeUp .6s ease;opacity:0;animation-fill-mode:forwards;animation-delay:.2s}
@keyframes fadeUp{to{opacity:1;transform:translateY(0)};from{opacity:0;transform:translateY(12px)}}
.shayari{margin-top:12px;font-size:18px;line-height:1.5;color:#222}
.topAd, .botAd{margin:12px 0;padding:8px;border-radius:8px;background:#fff0f6;border:1px dashed #ffd6ea;color:var(--muted)}
.copyBlock{margin-top:12px;text-align:left;max-height:220px;overflow:auto;padding:10px;border-radius:8px;background:#fbf7ff}
.copyLine{padding:6px 4px;border-bottom:1px solid #faf0fb}
.controls{display:flex;gap:8px;justify-content:center;margin-top:12px;flex-wrap:wrap}
.btn{padding:10px 14px;border-radius:10px;border:0;background:linear-gradient(90deg,var(--accent2),var(--accent));color:white;font-weight:700;cursor:pointer}
.small{font-size:13px;color:var(--muted)}
</style>
</head>
<body>
<div class="card" id="card">
  <div class="topAd" id="topAd">
    <!-- PASTE TOP BANNER SCRIPT HERE -->
     <script type="text/javascript">
          atOptions = {
            'key' : 'c533f92842a99236b1cb6736b289861e',
            'format' : 'iframe',
            'height' : 50,
            'width' : 320,
            'params' : {}
          };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/c533f92842a99236b1cb6736b289861e/invoke.js"></script>
  
  </div>

  <h2 id="coupleName" class="small">You ‚ù§Ô∏è Partner</h2>
  <div id="score" class="huge">--%</div>
  <div id="verdict" class="small fadeUp" style="margin-top:8px"></div>

  <div class="shayari" id="shayari" style="opacity:0;transform:translateY(12px);transition:all .6s .2s"></div>

  <div class="copyBlock" id="copyBlock" style="display:none">
    <div class="small">Your 100 lines (one per line):</div>
    <div id="lines"></div>
  </div>

  <div class="controls">
    <button id="copyBtn" class="btn">Copy Selected (opens ad)</button>
    <button id="againBtn" class="btn" style="background:#00b894">Back & Try Again</button>
  </div>

  <div class="botAd small" id="botAd">
    <!-- PASTE BOTTOM NATIVE BANNER SCRIPT HERE -->
  <script type="text/javascript">
          atOptions = {
            'key' : 'c533f92842a99236b1cb6736b289861e',
            'format' : 'iframe',
            'height' : 50,
            'width' : 250,
            'params' : {}
          };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/c533f92842a99236b1cb6736b289861e/invoke.js"></script>
  </div>

  <div class="small" style="margin-top:12px;color:var(--muted)">Made for fun ‚Ä¢ Don't take it seriously</div>
</div>

<script>
/* Read payload from localStorage */
let payload = null;
try{ payload = JSON.parse(localStorage.getItem('love_payload')); }catch(e){ payload=null; }

if(!payload){
  // if no payload, redirect back to index
  alert('No result found ‚Äî returning to home.');
  window.location.href = 'index.html';
} else {
  const {name1,name2,score,shayari,words} = payload;
  document.getElementById('coupleName').innerText = (name1||'You') + ' ‚ù§Ô∏è ' + (name2||'Partner');
  const scoreEl = document.getElementById('score');
  const verdictEl = document.getElementById('verdict');
  const shEl = document.getElementById('shayari');

  // animate score count up
  let cur = 0;
  const target = score || 75;
  const step = Math.max(1, Math.round(target/20));
  const intv = setInterval(()=>{
    cur += step;
    if(cur >= target){ cur = target; clearInterval(intv); }
    scoreEl.innerText = cur + '%';
  }, 40);

  // verdict
  setTimeout(()=> {
    const v = target >= 90 ? 'A Perfect Match üî•üî•' : target >=75 ? 'Strong bond üíû' : target >=60 ? 'Good connection ‚ù§Ô∏è' : 'Love needs effort üíó';
    verdictEl.innerText = v;
    verdictEl.style.opacity=1;
  }, 900);

  // show shayari with fade
  setTimeout(()=> {
    shEl.innerText = shayari || 'Tum mere ho‚Ä¶';
    shEl.style.opacity = 1;
    shEl.style.transform = 'translateY(0)';
  }, 1200);

  // show 100-lines block
  if(Array.isArray(words) && words.length){
    const linesDiv = document.getElementById('lines');
    linesDiv.innerHTML = '';
    for(let i=0;i<words.length;i++){
      const d = document.createElement('div');
      d.className = 'copyLine';
      d.innerText = words[i];
      linesDiv.appendChild(d);
    }
    document.getElementById('copyBlock').style.display = 'block';
  }
}

/* Ad + copy behavior */
const SMART_LINK = 'https://www.effectivegatecpm.com/z1he616vq?key=f8ccc658bd057c3893c8b07479df0378';
const SOCIAL_SCRIPT = '//pl28167123.effectivegatecpm.com/d1/7d/fb/d17dfb708c5e932f8a0243b86dfdd21d.js';

function openAdThen(doFn){
  const w = window.open(SMART_LINK, '_blank', 'noopener,noreferrer');
  if(w){
    try{
      w.document.write('<html><head><title>Ad</title></head><body><div>Loading ad...</div></body></html>');
      const s = w.document.createElement('script'); s.src = SOCIAL_SCRIPT; s.async=true; w.document.body.appendChild(s);
    }catch(e){}
    setTimeout(()=> { doFn(); }, 350);
  } else {
    // if blocked, still run action (so copy works) but ideally ask user to open manual link
    doFn();
  }
}

document.getElementById('copyBtn').addEventListener('click', ()=>{
  openAdThen(()=>{
    const lines = Array.from(document.querySelectorAll('.copyLine')).map(d=>d.innerText).join('\\n');
    navigator.clipboard.writeText(lines).then(()=> alert('Copied lines to clipboard'));
  });
});

document.getElementById('againBtn').addEventListener('click', ()=>{
  // go back to index
  window.location.href = 'index.html';
});
</script>
</body>
</html>